buildscript {
	ext.ktor_version = '0.9.0'
	ext.kotlin_version = '1.1.2'
	ext.dagger_version = '2.10'

	repositories {
		jcenter()
	}
	dependencies {
		classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
		classpath "org.jetbrains.kotlin:kotlin-noarg:$kotlin_version"
	}
}

apply plugin: 'kotlin'
apply plugin: 'kotlin-kapt'
apply plugin: "kotlin-jpa"
apply plugin: 'idea'
apply plugin: 'application'

noArg {
	annotation("javax.persistence.Entity")
}

repositories {
	jcenter()
	maven { url  "http://dl.bintray.com/kotlin/ktor" }
	maven { url "https://dl.bintray.com/kotlin/kotlinx" }

}

kotlin {
	experimental {
		coroutines "enable"
	}
}


mainClassName = "ch.unstable.hackforcoffee.MainKt"

dependencies {
	compile "org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version"

	compile "com.google.dagger:dagger:$dagger_version"
	kapt "com.google.dagger:dagger-compiler:$dagger_version"

	compile "io.ktor:ktor-server-netty:$ktor_version"

	compile 'org.postgresql:postgresql:42.1.4'
	compile "org.hibernate:hibernate-core:5.2.12.Final"

	compile "com.mchange:c3p0:0.9.5.2"
	compile "org.slf4j:slf4j-simple:1.7.25"
}

// At the moment for non-Android projects you need to explicitly
// mark the code generated by kapt as 'generated source code'
// for correct highlighting and resolve in IDE.
idea {
	module {
		sourceDirs += file('build/generated/source/kapt/main')
		generatedSourceDirs += file('build/generated/source/kapt/main')
	}
}